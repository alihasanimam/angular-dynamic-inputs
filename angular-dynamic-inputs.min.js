angular.module("dynInput",[]).directive("dynamicInput",["$q","$parse","$http","$templateCache","$compile","$document","$timeout",function(e,t,a,l,n,i,d){var r={text:{element:"input",type:"text",editable:!0,textBased:!0},date:{element:"input",type:"date",editable:!0,textBased:!0},datetime:{element:"input",type:"datetime",editable:!0,textBased:!0},"datetime-local":{element:"input",type:"datetime-local",editable:!0,textBased:!0},email:{element:"input",type:"email",editable:!0,textBased:!0},month:{element:"input",type:"month",editable:!0,textBased:!0},number:{element:"input",type:"number",editable:!0,textBased:!0},password:{element:"input",type:"password",editable:!0,textBased:!0},search:{element:"input",type:"search",editable:!0,textBased:!0},tel:{element:"input",type:"tel",editable:!0,textBased:!0},textarea:{element:"textarea",editable:!0,textBased:!0},time:{element:"input",type:"time",editable:!0,textBased:!0},url:{element:"input",type:"url",editable:!0,textBased:!0},week:{element:"input",type:"week",editable:!0,textBased:!0},checkbox:{element:"input",type:"checkbox",editable:!0,textBased:!1},color:{element:"input",type:"color",editable:!0,textBased:!1},file:{element:"input",type:"file",editable:!0,textBased:!1},range:{element:"input",type:"range",editable:!0,textBased:!1},select:{element:"select",editable:!0,textBased:!1},checklist:{element:"div",editable:!1,textBased:!1},fieldset:{element:"fieldset",editable:!1,textBased:!1},radio:{element:"div",editable:!1,textBased:!1},button:{element:"button",type:"button",editable:!1,textBased:!1},hidden:{element:"input",type:"hidden",editable:!1,textBased:!1},image:{element:"input",type:"image",editable:!1,textBased:!1},legend:{element:"legend",editable:!1,textBased:!1},reset:{element:"button",type:"reset",editable:!1,textBased:!1},submit:{element:"button",type:"submit",editable:!1,textBased:!1}};return{restrict:"E",link:function(d,s,u){if(angular.isDefined(u.model)&&(angular.isDefined(u.template)||angular.isDefined(u.templateUrl))){var p=null,g=u.model,m={};(u.template?e.when(t(u.template)(d)):a.get(u.templateUrl,{cache:l}).then(function(e){return e.data})).then(function(e){var t=function(e,a){if("$"!=String(a).charAt(0))if(angular.isDefined(r[e.type])&&!1!==r[e.type]){if(p=angular.element(i[0].createElement(r[e.type].element)),angular.isDefined(r[e.type].type)&&p.attr("type",r[e.type].type),angular.isDefined(r[e.type].editable)&&r[e.type].editable&&(angular.isDefined(e.model)||(e.model=g),p.attr("name",e.model),p.attr("ng-model",e.model),angular.isDefined(e.readonly)&&p.attr("ng-readonly",e.readonly),angular.isDefined(e.required)&&p.attr("ng-required",e.required),angular.isDefined(e.val)&&p.attr("value",e.val)),angular.isDefined(r[e.type].textBased)&&r[e.type].textBased&&(angular.isDefined(e.minLength)&&p.attr("ng-minlength",e.minLength),angular.isDefined(e.maxLength)&&p.attr("ng-maxlength",e.maxLength),angular.isDefined(e.validate)&&p.attr("ng-pattern",e.validate),angular.isDefined(e.placeholder)&&p.attr("placeholder",e.placeholder)),"number"===e.type||"range"===e.type)angular.isDefined(e.minValue)&&p.attr("min",e.minValue),angular.isDefined(e.maxValue)&&p.attr("max",e.maxValue),angular.isDefined(e.step)&&p.attr("step",e.step);else if(["text","textarea"].indexOf(e.type)>-1)angular.isDefined(e.splitBy)&&p.attr("ng-list",e.splitBy);else if("checkbox"===e.type)angular.isDefined(e.isOn)&&p.attr("ng-true-value","'"+e.isOn+"'"),angular.isDefined(e.isOff)&&p.attr("ng-false-value","'"+e.isOff+"'"),angular.isDefined(e.slaveTo)&&p.attr("ng-checked",e.slaveTo);else if("checklist"===e.type)angular.isDefined(e.val),angular.isDefined(e.options)&&(!angular.isDefined(g[e.model])||angular.isObject(g[e.model]),angular.forEach(e.options,function(t,a){newChild=angular.element('<input type="checkbox" />'),newChild.attr("name",e.model+"."+a),newChild.attr("ng-model",e.model+"."+a),angular.isDefined(t.class)&&newChild.attr("ng-class",t.class),angular.isDefined(e.disabled)&&newChild.attr("ng-disabled",e.disabled),angular.isDefined(e.readonly)&&newChild.attr("ng-readonly",e.readonly),angular.isDefined(e.required)&&newChild.attr("ng-required",e.required),angular.isDefined(e.callback)&&newChild.attr("ng-change",e.callback),angular.isDefined(t.isOn)&&newChild.attr("ng-true-value","'"+t.isOn+"'"),angular.isDefined(t.isOff)&&newChild.attr("ng-false-value","'"+t.isOff+"'"),angular.isDefined(t.slaveTo)&&newChild.attr("ng-checked",t.slaveTo),angular.isDefined(t.val)&&newChild.attr("value",t.val),angular.isDefined(t.label)&&(newChild=newChild.wrap("<label></label>").parent(),newChild.append(document.createTextNode(" "+t.label))),p.append(newChild)}));else if("radio"===e.type)angular.isDefined(e.val),angular.isDefined(e.values)&&angular.forEach(e.values,function(t,a){newChild=angular.element('<input type="radio" />'),newChild.attr("name",e.model),newChild.attr("ng-model",e.model),angular.isDefined(e.class)&&newChild.attr("ng-class",e.class),angular.isDefined(e.disabled)&&newChild.attr("ng-disabled",e.disabled),angular.isDefined(e.callback)&&newChild.attr("ng-change",e.callback),angular.isDefined(e.readonly)&&newChild.attr("ng-readonly",e.readonly),angular.isDefined(e.required)&&newChild.attr("ng-required",e.required),newChild.attr("value",a),angular.isDefined(e.val)&&e.val===a&&newChild.attr("checked","checked"),t&&(newChild=newChild.wrap("<label></label>").parent(),newChild.append(document.createTextNode(" "+t))),p.append(newChild)});else if("select"===e.type)angular.isDefined(e.multiple)&&!1!==e.multiple&&p.attr("multiple","multiple"),angular.isDefined(e.empty)&&!1!==e.empty&&p.append(angular.element(i[0].createElement("option")).attr("value","").html(e.empty)),angular.isDefined(e.autoOptions)?p.attr("ng-options",e.autoOptions):angular.isDefined(e.options)&&(angular.forEach(e.options,function(e,t){newChild=angular.element(i[0].createElement("option")),newChild.attr("value",t),angular.isDefined(e.disabled)&&newChild.attr("ng-disabled",e.disabled),angular.isDefined(e.slaveTo)&&newChild.attr("ng-selected",e.slaveTo),angular.isDefined(e.label)&&newChild.html(e.label),angular.isDefined(e.group)?(angular.isDefined(m[e.group])||(m[e.group]=angular.element(i[0].createElement("optgroup")),m[e.group].attr("label",e.group)),m[e.group].append(newChild)):p.append(newChild)}),angular.equals(m,{})||(angular.forEach(m,function(e){p.append(e)}),m={}));else if("image"===e.type)angular.isDefined(e.label)&&p.attr("alt",e.label),angular.isDefined(e.source)&&p.attr("src",e.source);else if("hidden"===e.type)p.attr("name",e.model),p.attr("ng-model",e.model),angular.isDefined(e.val)&&p.attr("value",e.val);else if("file"===e.type)angular.isDefined(e.multiple)&&p.attr("multiple",e.multiple);else if("fieldset"===e.type){if(angular.isDefined(e.fields)){var l=p;angular.forEach(e.fields,t,p),p=l}}else"date"===e.type?(e.type="text",p.attr("type","text"),$(p).datepicker({dateFormat:"M d yy"})):"datetime"===e.type?(e.type="text",p.attr("type","text"),$(p).datetimepicker({dateFormat:"M d yy"})):"time"===e.type&&(e.type="text",p.attr("type","text"),$(p).timepicker({dateFormat:"M d yy"}));if(angular.isDefined(e.cell)&&p.attr("data-cell",e.cell),angular.isDefined(e.formula)&&p.attr("data-formula",e.formula),angular.isDefined(e.format)&&p.attr("data-format",e.format),"radio"!==e.type&&(angular.isDefined(e.class)&&p.attr("ng-class",e.class),"checklist"!==e.type&&(angular.isDefined(e.disabled)&&p.attr("ng-disabled",e.disabled),angular.isDefined(e.callback)&&(["button","fieldset","image","legend","reset","submit"].indexOf(e.type)>-1?cbAtt="ng-click":cbAtt="ng-change",p.attr(cbAtt,e.callback)),angular.isDefined(e.blur)&&-1==["button","fieldset","image","legend","reset","submit"].indexOf(e.type)&&p.attr("ng-blur",e.blur),angular.isDefined(e.focus)&&-1==["button","fieldset","image","legend","reset","submit"].indexOf(e.type)&&p.attr("ng-focus",e.focus))),angular.isDefined(e.label))if(["image","hidden"].indexOf(e.type)>-1)angular.noop();else if(["fieldset"].indexOf(e.type)>-1)p.prepend(angular.element(i[0].createElement("legend")).html(e.label));else if(["button","legend","reset","submit"].indexOf(e.type)>-1)p.html(e.label);else{p.addClass("form-control"),p=p.wrap('<div class="form-group"></div>').parent();var n=document.createElement("label");n.setAttribute("for",e.name),n.appendChild(document.createTextNode(e.label)),p.prepend(n)}angular.isDefined(e.attributes)&&angular.forEach(e.attributes,function(e,t){p.attr(t,e)}),s.append(p)}else p=angular.element("<span></span>"),angular.isDefined(e.label)&&angular.element(p).html(e.label),angular.forEach(e,function(e,t){["label","type"].indexOf(t)>-1||p.attr(t,e)}),s.append(p)};t(e),n(p)(d)})}}}}]);